<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ÙØµÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…</title>
  <link rel="stylesheet" href="style.css">

  <!-- Firebase App (core) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBXQ9wayuB_vHtCplBY4-nNH3W_QNJewso",
      authDomain: "efteqadapp.firebaseapp.com",
      projectId: "efteqadapp",
      storageBucket: "efteqadapp.appspot.com",
      messagingSenderId: "810482383329",
      appId: "1:810482383329:web:8de0fc96be0e808b25baa0",
      measurementId: "G-F32L1YEXJ8"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
  <div class="container">
    <h2>Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒØŒ <span id="classTitle">ÙØµÙ„Ùƒ</span></h2>

    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>

    <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø¯ÙˆÙ… Ø¬Ø¯ÙŠØ¯</h3>
    <input type="text" id="studentName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø®Ø¯ÙˆÙ…">
    <input type="date" id="studentBirthday" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯">
    <textarea id="visitNote" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø§ÙØªÙ‚Ø§Ø¯"></textarea>
    <button onclick="addStudent()">Ø¥Ø¶Ø§ÙØ©</button>

    <br><br>
    <button onclick="goToList()">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø®Ø¯ÙˆÙ…ÙŠÙ†</button>
  </div>

  <script>
    function addStudent() {
      const name = document.getElementById("studentName").value.trim();
      const birthday = document.getElementById("studentBirthday").value;
      const note = document.getElementById("visitNote").value.trim();

      if (!name || !birthday) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø§Ø³Ù… ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯");
        return;
      }

      db.collection("students").add({
        name: name,
        birthday: birthday,
        note: note,
        attendance: null,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø®Ø¯ÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­");
        document.getElementById("studentName").value = "";
        document.getElementById("studentBirthday").value = "";
        document.getElementById("visitNote").value = "";
      }).catch(error => {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©:", error);
      });
    }

    function goToList() {
      window.location.href = "studentsList.html";
    }

    function logout() {
      // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø· ÙƒÙˆØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø£Ùˆ ØªØ¹ÙˆØ¯ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
